---
import Base from "@/layouts/Base.astro";
import ImageMod from "@/components/ImageMod.astro";
import DynamicIcon from "@/helpers/DynamicIcon";
import config from "@/config/config.json";

const links = [
  {
    name: "GitHub",
    description: "Open source projects & contributions",
    icon: "FaGithub",
    url: "https://github.com/Ying-Kai-Liao",
    span: "large",
  },
  {
    name: "LinkedIn",
    description: "Professional network",
    icon: "FaLinkedin",
    url: "https://www.linkedin.com/in/ying-kai-liao",
    span: "small",
  },
  {
    name: "X / Twitter",
    description: "Thoughts & updates",
    icon: "FaXTwitter",
    url: "https://x.com/YingKaiLiao1",
    span: "small",
  },
  {
    name: "Threads",
    description: "Casual posts",
    icon: "FaThreads",
    url: "https://www.threads.com/@yinn__nkai",
    span: "small",
  },
  {
    name: "Instagram",
    description: "Photos & stories",
    icon: "FaInstagram",
    url: "https://www.instagram.com/yinn__nkai",
    span: "small",
  },
  {
    name: "Blog",
    description: "AI, dev, data science & startup lessons",
    icon: "FaPenNib",
    url: "/blog",
    span: "large",
    internal: true,
  },
];
---

<Base title="Links" meta_title="Links â€” Kai Liao" description="All my links in one place.">
  <section class="section pt-14">
    <div class="container max-w-2xl">
      <!-- Profile header -->
      <div class="text-center mb-10 animate-fade-in-up">
        <button
          id="profile-toggle"
          class="relative w-20 h-20 mx-auto mb-4 rounded-full cursor-pointer focus:outline-none group"
          style="perspective: 600px;"
          aria-label="Toggle profile picture"
        >
          <div id="profile-flipper" class="relative w-full h-full transition-transform duration-500" style="transform-style: preserve-3d;">
            <!-- Icon (front) -->
            <div class="absolute inset-0" style="backface-visibility: hidden;">
              <ImageMod
                src="/images/profile/avatar-yk.png"
                height={96}
                width={96}
                alt="Kai Liao avatar"
                class="rounded-full object-cover w-20 h-20 shadow-md ring-4 ring-light dark:ring-darkmode-light group-hover:ring-primary/30 dark:group-hover:ring-darkmode-primary/30 transition-all duration-200"
                format="webp"
              />
            </div>
            <!-- Real photo (back) -->
            <div class="absolute inset-0" style="backface-visibility: hidden; transform: rotateY(180deg);">
              <img
                src="/images/profile/yk-2025.jpg"
                alt="Kai Liao photo"
                class="rounded-full object-cover w-20 h-20 shadow-md ring-4 ring-light dark:ring-darkmode-light group-hover:ring-primary/30 dark:group-hover:ring-darkmode-primary/30 transition-all duration-200"
                loading="lazy"
              />
            </div>
          </div>
        </button>
        <h1 class="text-h3 mb-1">Kai Liao</h1>
        <p class="text-text-light dark:text-darkmode-text-light">Developer & Startup Builder</p>
      </div>

      <script>
        document.addEventListener('astro:page-load', () => {
          const toggle = document.getElementById('profile-toggle');
          const flipper = document.getElementById('profile-flipper');
          if (!toggle || !flipper) return;
          let flipped = false;
          toggle.addEventListener('click', () => {
            flipped = !flipped;
            flipper.style.transform = flipped ? 'rotateY(180deg)' : 'rotateY(0deg)';
          });
        });
      </script>

      <!-- Bento grid -->
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4 animate-fade-in-up animate-delay-100">
        {links.map((link) => (
          <a
            href={link.url}
            target={link.internal ? "_self" : "_blank"}
            rel={link.internal ? "" : "noopener noreferrer"}
            class:list={[
              "group rounded-2xl border border-border dark:border-darkmode-border bg-white dark:bg-darkmode-light p-6 flex flex-col items-center justify-center text-center shadow-sm transition-all duration-200 cursor-pointer hover:-translate-y-1 hover:shadow-lg",
              link.span === "large" ? "col-span-2" : "col-span-1",
            ]}
          >
            <DynamicIcon
              icon={link.icon}
              className="text-3xl mb-3 text-text-dark dark:text-darkmode-text-dark group-hover:text-primary dark:group-hover:text-darkmode-primary transition-colors duration-200"
            />
            <span class="font-semibold text-text-dark dark:text-darkmode-text-dark text-sm">{link.name}</span>
            <span class="text-xs text-text-light dark:text-darkmode-text-light mt-1">{link.description}</span>
          </a>
        ))}
      </div>
    </div>
  </section>
</Base>
